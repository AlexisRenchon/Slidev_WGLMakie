function e(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var t=/*#__PURE__*/e(require("markdown-it/lib/token.js")),n=/^ *\[([\sx])] /i;function r(e,t){for(var n=e[t].level-1,r=t-1;r>=0;r--)if(e[r].level===n)return e[r]}function a(e,r){if(null!=e.children){var a=function(e){return e.map?"task-item-"+e.map[0]:"task-item-"+Math.ceil(1e7*Math.random()-1e3)}(e);e.children.splice(0,0,function(e,r,a){var i=new t.default("taskListItemCheckbox","",0);r||i.attrSet("disabled","true"),e.map&&i.attrSet("line",e.map[0].toString()),i.attrSet("id",a);var l=n.exec(e.content);return"x"===(null==l?void 0:l[1].toLowerCase())&&i.attrSet("checked","true"),i}(e,r.enabled,a)),e.children[1].content=e.children[1].content.replace(n,""),r.label&&(e.children.splice(1,0,function(e){var n=new t.default("taskListItemLabel_open","",1);return n.attrSet("id",e),n}(a)),e.children.push(new t.default("taskListItemLabel_close","",-1)))}}module.exports=function(e,t){void 0===t&&(t={enabled:!1,label:!1,lineNumber:!1}),e.core.ruler.after("inline","task-lists",function(e){return function(e,t){for(var i=e.tokens,l=2;l<i.length;l++)if("inline"===(c=i)[o=l].type&&"paragraph_open"===c[o-1].type&&"list_item_open"===c[o-2].type&&n.test(c[o].content)){a(i[l],t),i[l-2].attrJoin("class","task-list-item "+(t.enabled?" enabled":""));var s=r(i,l-2);s&&s.attrJoin("class","contains-task-list")}var c,o;return!1}(e,t)}),e.renderer.rules.taskListItemCheckbox=function(e){var n=e[0],r=n.attrGet("checked")?'checked="" ':"",a=n.attrGet("disabled")?'disabled="" ':"",i=n.attrGet("line"),l='id="'+n.attrGet("id")+'" ';return'<input class="task-list-item-checkbox" type="checkbox" '+r+a+(i&&t.lineNumber?'data-line="'+i+'" ':"")+l+"/>"},e.renderer.rules.taskListItemLabel_close=function(){return"</label>"},e.renderer.rules.taskListItemLabel_open=function(e){return'<label for="'+e[0].attrGet("id")+'">'}};
//# sourceMappingURL=index.cjs.map
