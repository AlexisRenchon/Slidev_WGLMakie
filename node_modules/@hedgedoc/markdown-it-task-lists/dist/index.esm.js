import e from"markdown-it/lib/token.js";var t=/^ *\[([\sx])] /i;function n(e,n){void 0===n&&(n={enabled:!1,label:!1,lineNumber:!1}),e.core.ruler.after("inline","task-lists",function(e){return function(e,n){for(var i=e.tokens,l=2;l<i.length;l++)if("inline"===(c=i)[o=l].type&&"paragraph_open"===c[o-1].type&&"list_item_open"===c[o-2].type&&t.test(c[o].content)){a(i[l],n),i[l-2].attrJoin("class","task-list-item "+(n.enabled?" enabled":""));var s=r(i,l-2);s&&s.attrJoin("class","contains-task-list")}var c,o;return!1}(e,n)}),e.renderer.rules.taskListItemCheckbox=function(e){var t=e[0],r=t.attrGet("checked")?'checked="" ':"",a=t.attrGet("disabled")?'disabled="" ':"",i=t.attrGet("line"),l='id="'+t.attrGet("id")+'" ';return'<input class="task-list-item-checkbox" type="checkbox" '+r+a+(i&&n.lineNumber?'data-line="'+i+'" ':"")+l+"/>"},e.renderer.rules.taskListItemLabel_close=function(){return"</label>"},e.renderer.rules.taskListItemLabel_open=function(e){return'<label for="'+e[0].attrGet("id")+'">'}}function r(e,t){for(var n=e[t].level-1,r=t-1;r>=0;r--)if(e[r].level===n)return e[r]}function a(n,r){if(null!=n.children){var a=function(e){return e.map?"task-item-"+e.map[0]:"task-item-"+Math.ceil(1e7*Math.random()-1e3)}(n);n.children.splice(0,0,function(n,r,a){var i=new e("taskListItemCheckbox","",0);r||i.attrSet("disabled","true"),n.map&&i.attrSet("line",n.map[0].toString()),i.attrSet("id",a);var l=t.exec(n.content);return"x"===(null==l?void 0:l[1].toLowerCase())&&i.attrSet("checked","true"),i}(n,r.enabled,a)),n.children[1].content=n.children[1].content.replace(t,""),r.label&&(n.children.splice(1,0,function(t){var n=new e("taskListItemLabel_open","",1);return n.attrSet("id",t),n}(a)),n.children.push(new e("taskListItemLabel_close","",-1)))}}export{n as default};
//# sourceMappingURL=index.esm.js.map
